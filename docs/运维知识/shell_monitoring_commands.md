# Shell 常用监控命令大全

适用于日常开发、测试、生产环境中的 CPU、内存、磁盘、网络、进程监控。

## ✅ 一、CPU 和内存使用监控


| 命令                | 说明                                        |
| ------------------- | ------------------------------------------- |
| `top`               | 实时查看系统资源，CPU、内存、进程等（常用） |
| `htop`              | top 的增强版本，支持交互式操作（需安装）    |
| `vmstat 1`          | 显示系统的内存、CPU、IO状态（每秒更新）     |
| `free -m`           | 显示内存使用情况（单位 MB）                 |
| `cat /proc/cpuinfo` | 查看CPU信息（型号、核心数等）               |
| `uptime`            | 查看系统运行时间和平均负载（load average）  |

## ✅ 二、磁盘与IO监控


| 命令           | 说明                                   |
| -------------- | -------------------------------------- |
| `df -h`        | 查看磁盘分区使用情况（单位：人类可读） |
| `du -sh /path` | 查看指定目录的磁盘占用总和             |
| `iostat -x 1`  | 显示磁盘IO状态（需安装`sysstat`）      |
| `iotop`        | 实时查看哪个进程在占用磁盘IO（需安装） |

## ✅ 三、网络状态与流量监控


| 命令                       | 说明                                  |
| -------------------------- | ------------------------------------- |
| `ss -tulnp`                | 显示监听的端口与进程（比 netstat 快） |
| `netstat -anp`             | 查看所有连接（老牌命令，兼容性强）    |
| `ping 8.8.8.8`             | 测试网络连通性                        |
| `traceroute www.baidu.com` | 路由跟踪（排查延迟）                  |
| `iftop`                    | 实时监控网络流量（需安装）            |
| `nethogs`                  | 按进程显示流量使用（需安装）          |

## ✅ 四、进程监控与排查


| 命令                 | 说明                                 |
| -------------------- | ------------------------------------ |
| `ps aux`             | 查看所有进程和资源使用情况           |
| `top -p <pid>`       | 只监控某个进程的资源占用             |
| `pidstat -p <pid> 1` | 显示指定进程的CPU/内存使用（需安装） |
| `strace -p <pid>`    | 跟踪进程的系统调用（排查卡顿）       |
| `lsof -p <pid>`      | 查看某进程打开的文件、端口等资源     |

## ✅ 五、综合系统状态查看工具


| 命令                   | 说明                                        |
| ---------------------- | ------------------------------------------- |
| `glances`              | 全方位系统监控（需安装 Python 包`glances`） |
| `dstat`                | 综合监控 CPU、磁盘、网络等多维度数据        |
| `sar`                  | 统计资源使用趋势（需安装`sysstat`）         |
| `watch -n 1 'command'` | 每秒刷新命令执行结果，如`watch -n 1 df -h`  |

## ✅ 示例脚本：一键系统资源查看

```bash
#!/bin/bash
echo "====== CPU & Memory ======"
top -b -n1 | head -n 10
echo "====== Disk Usage ======"
df -h
echo "====== Network Ports ======"
ss -tuln
```
