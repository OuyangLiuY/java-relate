秒杀需要考虑的前置问题：
1、现在架构能否做秒杀
2、如何分散流量？分地区+部署相同架构。
3、考虑大部分流量，因为需要疯狂刷新秒杀页面，所以将静态页面放到CDN。
秒杀架构需要考虑的问题：
1、瞬时大流量的冲击
2、超卖，少卖问题
3、高可用
4、恶意请求。

针对秒杀架构问题解决方案：
1、因为秒杀场景是供不应求，所以：
前端限流：
1、可以随意丢弃请求，直接返回秒杀失败
2、活动前置灰抢购按钮，防止产生无效流量
3、防爆击
后端限流：
1、令牌桶算法
2、ip访问限制，某一段时间限制ip不能一直访问
3、用户黑名单
4、参与资格校验，优先级校验？=》优先级队列。
5、熔断降级
6、后端框架方案：gateway、sentinel
7、后端可以引入缓存，提高吞吐量，需要考虑问题，比如：缓存击穿，缓存穿透，秒杀活动前进行预热。
<缓存击穿了怎么做？volatile b，保存商品是否已卖完。tryLock(int signal),设置数据库最大请求申请数据，去尝试访问数据库，如何try失败，直接返回。>
2、引入MQ，流量削峰
3、前端页面等资源静态化，引入CDN
4、超卖少买问题：
超卖：使用乐观锁进行库存变更，保证数据的安全性
少卖：使用定时任务，定期同步缓存和数据库中的数据
使用定时任务，定期取消超时未支付的订单并恢复库存

5、如何高可用：
秒杀服务独立部署，前提：资源充足的情况，不考虑优惠卷，红包，下单送积分场景，剥离无用代码
后台服务集群化，并添加lvs和nginx等负载均衡技术
6、恶意请求解决：
1、动态URL，增加加密算法，给URL添加随机字符	，然后前端获取url，后台校验，秒杀时间到返回真实的URL链接
2、IP限制，可以防止黄牛、友商恶意刷单或捣乱
3、增加算术校验码分辨是真实用户还是人机脚本
	